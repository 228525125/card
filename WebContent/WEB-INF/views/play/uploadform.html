<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
#parse("/link_share.html")
<title>card配置</title>
<script type="text/javascript" src="plugins/extjs/card/UploadFormPanel.js"></script>
</head>
<body>
<script type="text/javascript">
Ext.QuickTips.init();
Ext.Ajax.timeout = 5 * 60 * 1000;// 10分钟，默认为30秒  设置加载数据超时最大值
Ext.onReady(function(){
	var panel = new UploadFormPanel({renderTo :Ext.getBody(),title:'上传配置文件',iconCls:'cogIcon',
		buttons:[{text:"保存",
			  handler:function(){
				this.fp.form.submit({
						waitMsg:'正在保存。。。',
			            url:'?cmd=upload',
			            method:'POST',
			            success:function(form,action){
							if(null!=action.result&&action.result.msg)
				        		Ext.Msg.alert('提示',action.result.msg,function(){
				        			this.win.close();
						           	this.store.reload(); 
				        		},this);
							else{
					           	this.win.close();
					           	this.store.reload();
							}
			            },
			            scope:this
				});	
			  },
			  scope:this},
			  {text:"清空",
			   handler:function(){
				  this.fp.form.reset();
			   },
			   scope:this}
			 ]});
});
</script>
</body>
</html>